<div class="row">
  <% recipes.forEach(recipe => { %>
    <div class="col-md-6 mb-4">
      <div class="card h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="card-title mb-0">
              <a href="/recipes/<%= recipe.id %>" class="text-dark text-decoration-none"><%= recipe.title %>
            </h5>
            <% if (user) { %>
              <form method="POST" action="/recipes/<%= recipe.id %>/<%= recipe.isFavorite ? 'unfavorite' : 'favorite' %>" class="d-inline">
                <button type="submit" class="btn btn-link p-0 border-0">
                  <i class="bi <%= recipe.isFavorite ? 'bi-heart-fill text-danger' : 'bi-heart' %>" style="font-size: 1.5rem;"></i>
                </button>
              </form>
            <% } %>
          </div>
                  
          <% if (recipe.imagePath) { %>
            <img src="/uploads/<%= recipe.imagePath %>" class="img-fluid mt-2 d-block mx-auto" />
            <% } %></a>
          <% if (recipe.user && recipe.user.username) { %>
            <p class="mb-1"><strong>Autor:</strong> <%= recipe.user.username %></p>
          <% } %>
          <p class="mb-0">
            <strong>Hodnocení:</strong>
            <%= recipe.averageRating ? recipe.averageRating.toFixed(1) : "Žádné hodnocení zatím" %> ★
            (<%= recipe.votesCount || 0 %> hlasů)
          </p>
          <div>
            <strong>Kategorie:</strong> <%= recipe.category %>
          </div>
        </div>
      </div>
    </div>
  <% }) %>
</div>
